<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <title>Frontend Mentor | Newsletter sign-up form with success message</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="estilos.css">
</head>

<body>

  <!-- Sign-up form start -->
  <div class="container">
    <div class="signup-form" id="signupForm">
      <div class="form-content">
        <h1 class="form-title">Stay updated!</h1>

        <p class="form-description">
          Join 60,000+ product managers receiving monthly updates on:
        </p>

        <ul class="benefits-list">
          <li>Product discovery and building what matters</li>
          <li>Measuring to ensure updates are a success</li>
          <li>And much more!</li>
        </ul>

        <form id="newsletterForm">
          <div class="form-group">
            <div class="label-container">
              <label for="email">Email address</label>
              <span class="error-message" id="emailError">Valid email required</span>
            </div>
            <input type="email" id="email" placeholder="email@company.com" required>
          </div>

          <button type="submit" id="submitBtn">
            Subscribe to monthly newsletter
          </button>
        </form>
      </div>

      <div class="image-container">
        <img src="./assets/images/illustration-sign-up-desktop.svg" alt="Sign up illustration"
          class="illustration-desktop">
        <img src="./assets/images/illustration-sign-up-mobile.svg" alt="Sign up illustration"
          class="illustration-mobile">
      </div>
    </div>

    <!-- Success message start - TEXTO CORREGIDO -->
    <div class="success-message" id="successMessage">
      <img src="./assets/images/icon-success.svg" alt="Success icon" class="success-icon">

      <h2 class="success-title">Thanks for subscribing!</h2>

      <p class="success-text">
        A confirmation email has been sent to
        <span class="user-email" id="userEmail">ash@loremcompany.com</span>.
        Please open it and click the button inside to confirm your subscription.
      </p>

      <button class="dismiss-btn" id="dismissBtn">
        Dismiss message
      </button>
    </div>
    <!-- Success message end -->
  </div>

  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="#">Eduardo Peralta</a>.
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const signupForm = document.getElementById('signupForm');
      const successMessage = document.getElementById('successMessage');
      const newsletterForm = document.getElementById('newsletterForm');
      const emailInput = document.getElementById('email');
      const emailError = document.getElementById('emailError');
      const userEmail = document.getElementById('userEmail');
      const dismissBtn = document.getElementById('dismissBtn');
      const submitBtn = document.getElementById('submitBtn');

      // Validación de email
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      // Mostrar error
      function showError() {
        emailInput.classList.add('error');
        emailError.classList.add('show-error');
      }

      // Ocultar error
      function hideError() {
        emailInput.classList.remove('error');
        emailError.classList.remove('show-error');
      }

      // Manejar envío del formulario
      newsletterForm.addEventListener('submit', function (e) {
        e.preventDefault();

        const email = emailInput.value.trim();

        if (!email || !isValidEmail(email)) {
          showError();
        } else {
          hideError();
          // Mostrar mensaje de éxito
          userEmail.textContent = email;
          signupForm.style.display = 'none';
          successMessage.style.display = 'block';

          // En mobile, hacer que ocupe toda la pantalla
          if (window.innerWidth <= 768) {
            successMessage.style.display = 'flex';
            document.querySelector('.container').style.maxWidth = '100%';
          }
        }
      });

      // Validación en tiempo real
      emailInput.addEventListener('input', function () {
        if (isValidEmail(this.value.trim())) {
          hideError();
        }
      });

      // Botón dismiss
      dismissBtn.addEventListener('click', function () {
        successMessage.style.display = 'none';
        signupForm.style.display = 'grid';
        newsletterForm.reset();

        // Restaurar estilos en mobile
        if (window.innerWidth <= 768) {
          document.querySelector('.container').style.maxWidth = '100%';
        }
      });

      // Manejar tecla Enter en el input
      emailInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
          newsletterForm.dispatchEvent(new Event('submit'));
        }
      });

      // Manejar cambio de tamaño de ventana
      window.addEventListener('resize', function () {
        if (window.innerWidth <= 768 && successMessage.style.display !== 'none') {
          successMessage.style.display = 'flex';
        } else if (window.innerWidth > 768 && successMessage.style.display !== 'none') {
          successMessage.style.display = 'block';
        }
      });
    });
  </script>


</body>

</html>